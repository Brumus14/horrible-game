public class Game {
    public static void main(String[] args) {
        GameArena arena = new GameArena(1920, 1080);

        /*GameMap map = new GameMap(5, 5);
        map.SetMap(new int[][] {{1, 1, 1, 1, 1},
                                {1, 0, 0, 1, 1},
                                {1, 1, 0, 1, 1},
                                {1, 0, 0, 0, 1},
                                {1, 1, 1, 1, 1,}});
         */

        GameMap map = new GameMap(24,24);
        map.SetMap(new int[][] {{1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
                                 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
                                {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                {1, 0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 0,
                                 0, 0, 0, 3, 0, 3, 0, 3, 0, 0, 0, 1},
                                {1, 0, 0, 0, 0, 0, 2, 0, 0, 0, 2, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                {1, 0, 0, 0, 0, 0, 2, 0, 0, 0, 2, 0,
                                 0, 0, 0, 3, 0, 0, 0, 3, 0, 0, 0, 1},
                                {1, 0, 0, 0, 0, 0, 2, 0, 0, 0, 2, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                {1, 0, 0, 0, 0, 0, 2, 2, 0, 2, 2, 0,
                                 0, 0, 0, 3, 0, 3, 0, 3, 0, 0, 0, 1},
                                {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                {1, 4, 4, 4, 4, 4, 4, 4, 4, 0, 0, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                {1, 4, 0, 4, 0, 0, 0, 0, 4, 0, 0, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                {1, 4, 0, 0, 0, 0, 5, 0, 4, 0, 0, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                {1, 4, 0, 4, 0, 0, 0, 0, 4, 0, 0, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                {1, 4, 0, 4, 4, 4, 4, 4, 4, 0, 0, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                {1, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                {1, 4, 4, 4, 4, 4, 4, 4, 4, 0, 0, 0,
                                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
                                 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1}});

        Generator g = new Generator();
        g.randomise();
        g.createPath();
        g.load(map);
        CursorManager c = new CursorManager(arena.getPanel(), 1920/2, 1080/2);
        c.toggleCursor();

        Player player = new Player(12.5, 1.5, 0.66, 0.66, 0.03, 0.03);

        Raycaster raycaster = new Raycaster(arena, 480);

        Sprite enemy = new Sprite(arena, player, 7, 7, 200, 200, "blue");

        boolean paused = false;
        boolean escHeld = false;
        while (true) {
            if(arena.escPressed() && !escHeld){
                c.Update();
                c.toggleCursor();
                paused = !paused;
            }
            if(arena.escPressed()){
                escHeld = true;
            }
            else{
                escHeld = false;
            }

            arena.pause();
            if(!paused){
                player.HandleMovement(arena);
                enemy.Update();
                raycaster.raycast(map, player);
                c.Update();
            }
        }
    }
}
